set define off verify off feedback off
whenever sqlerror exit sql.sqlcode rollback
--------------------------------------------------------------------------------
--
-- ORACLE Application Express (APEX) export file
--
-- You should run the script connected to SQL*Plus as the Oracle user
-- APEX_050000 or as the owner (parsing schema) of the application.
--
-- NOTE: Calls to apex_application_install override the defaults below.
--
--------------------------------------------------------------------------------
begin
wwv_flow_api.import_begin (
 p_version_yyyy_mm_dd=>'2013.01.01'
,p_release=>'5.0.0.00.31'
,p_default_workspace_id=>1691775553450803
,p_default_application_id=>100309
,p_default_owner=>'TEST'
);
end;
/
prompt --application/ui_types
begin
null;
end;
/
prompt --application/shared_components/plugins/item_type/hr_bilog_mgoricki_dynamictree
begin
wwv_flow_api.create_plugin(
 p_id=>wwv_flow_api.id(29316328388941945)
,p_plugin_type=>'ITEM TYPE'
,p_name=>'HR.BILOG.MGORICKI.DYNAMICTREE'
,p_display_name=>'Dynamic Tree Search'
,p_supported_ui_types=>'DESKTOP'
,p_plsql_code=>wwv_flow_utilities.join(wwv_flow_t_varchar2(
'-------------------------------------------------------------------------',
'-- Author  : Marko Goricki',
'-- Mail    : mgoricki8@gmail.com',
'-- Blog    : http://apexbyg.blogspot.com/',
'-- Company : http://bilog.hr/',
'-- Created : 15.07.2015 12:00:00 PM',
'-- Purpose : Render function for APEX plugin that enables dynamic search of tree region',
'-- Version : v.1.0.0 ',
'FUNCTION f_render_item(p_item                IN apex_plugin.t_page_item',
'                      ,p_plugin              IN apex_plugin.t_plugin',
'                      ,p_value               IN VARCHAR2',
'                      ,p_is_readonly         IN BOOLEAN',
'                      ,p_is_printer_friendly IN BOOLEAN)',
'  RETURN apex_plugin.t_page_item_render_result ',
'IS',
'  v_return apex_plugin.t_page_item_render_result;',
'  v_onload_code varchar2(2000);',
'BEGIN',
'  -- render item',
'  sys.htp.prn(''<input id="''||p_item.name||''" type="text" name="''||apex_plugin.get_input_name_for_page_item(p_is_multi_value => false)||''" class="''||p_item.element_css_classes||''"  size="''||p_item.element_width||''" maxlength="''||p_item.element_max_len'
||'gth||''" ''||p_item.element_attributes||'' value="''||sys.htf.escape_sc(p_value)||''" />'');',
'  ',
'  -- add JS code',
'  apex_javascript.add_library(p_name      => ''hr.bilog.mgoricki.searchtree''    ',
'                            , p_directory => p_plugin.file_prefix                            ',
'                            , p_check_to_add_minified => TRUE',
'                            );   ',
'',
'  -- add onload code',
'  v_onload_code := ''apex.jQuery("#''||sys.htf.escape_sc(p_item.name)||''").dynamicTreeSearch({''||',
'     apex_javascript.add_attribute(''treeRegion'', p_item.attribute_01)||',
'     apex_javascript.add_attribute(''ajaxId'', apex_plugin.get_ajax_identifier)||  ',
'     apex_javascript.add_attribute(''filterOnLoad'', p_item.attribute_02)||          ',
'     apex_javascript.add_attribute(''delay'', p_item.attribute_03, p_add_comma => FALSE)||''});''; ',
'            ',
'  apex_javascript.add_onload_code(p_code => v_onload_code);                              ',
'    ',
'                             ',
'  RETURN v_return;',
'END;',
'',
'FUNCTION f_dummy (',
'    p_item   in apex_plugin.t_page_item,',
'    p_plugin in apex_plugin.t_plugin )',
'  RETURN apex_plugin.t_page_item_ajax_result',
'IS',
'BEGIN',
'  RETURN null;',
'END;',
''))
,p_render_function=>'f_render_item'
,p_ajax_function=>'f_dummy'
,p_standard_attributes=>'VISIBLE:SESSION_STATE:ELEMENT:WIDTH:PLACEHOLDER'
,p_substitute_attributes=>true
,p_subscribe_plugin_settings=>true
,p_help_text=>'Item type Plug-In that enables dynamic search for APEX tree regions.'
,p_version_identifier=>'1.0.0'
,p_about_url=>'https://apex.oracle.com/pls/apex/f?p=apexbyg:treesearch'
,p_files_version=>6
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(29317849005038790)
,p_plugin_id=>wwv_flow_api.id(29316328388941945)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>1
,p_display_sequence=>10
,p_prompt=>'Tree Region Static ID'
,p_attribute_type=>'TEXT'
,p_is_required=>true
,p_is_translatable=>false
,p_examples=>'rgnTree'
,p_help_text=>wwv_flow_utilities.join(wwv_flow_t_varchar2(
'Static ID of tree region that is filtered by item value.',
'It should be the same as Static ID property of tree region.'))
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(29318540784604790)
,p_plugin_id=>wwv_flow_api.id(29316328388941945)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>2
,p_display_sequence=>20
,p_prompt=>'Save Search on Refresh'
,p_attribute_type=>'CHECKBOX'
,p_is_required=>false
,p_default_value=>'N'
,p_is_translatable=>false
,p_help_text=>'Defines if value of search item is saved to session state - meaning that is available after page refresh.'
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(29320120081614411)
,p_plugin_id=>wwv_flow_api.id(29316328388941945)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>3
,p_display_sequence=>30
,p_prompt=>'Keydown Search Delay'
,p_attribute_type=>'NUMBER'
,p_is_required=>true
,p_default_value=>'200'
,p_is_translatable=>false
,p_help_text=>'Delay in ms after each key press before the start of search action.'
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '242866756E6374696F6E2829207B0A20202020242E7769646765742822637573746F6D2E64796E616D696354726565536561726368222C207B0A2020202020206F7074696F6E733A7B0A202020202020202074726565526567696F6E3A6E756C6C2C0A20';
wwv_flow_api.g_varchar2_table(2) := '2020202020202064656C61793A3230302C0A2020202020202020616A617849643A6E756C6C2C0A202020202020202066696C7465724F6E4C6F61643A2759270A2020202020207D2C20202020200A2020202020205F70726976617465536F726167653A20';
wwv_flow_api.g_varchar2_table(3) := '66756E6374696F6E28297B0A202020202020202076617220756977203D20746869733B0A20202020202020200A20202020202020207569772E5F76616C73203D207B0A202020202020202020206B657954696D656F75743A6E756C6C2C0A202020202020';
wwv_flow_api.g_varchar2_table(4) := '202020206C61737456616C3A27272C0A2020202020202020202066696C74657256616C3A27272C0A202020202020202020206974656D3A27272C0A202020202020202020206F6E4C6F61643A2759270A20202020202020207D2C0A20202020202020200A';
wwv_flow_api.g_varchar2_table(5) := '20202020202020207569772E5F6F626A203D207B0A20202020202020202020246974656D3A206E756C6C2C0A2020202020202020202024747265654C6973743A206E756C6C2C0A202020202020202020202474726565526567696F6E3A206E756C6C0A20';
wwv_flow_api.g_varchar2_table(6) := '202020202020207D3B0A20202020202020200A2020202020207D2C0A2020202020205F696E69743A2066756E6374696F6E2829207B0A202020202020202076617220756977203D20746869733B20202020202020200A2020202020202020617065782E64';
wwv_flow_api.g_varchar2_table(7) := '656275672E6C6F672822415045582044796E616D6963205472656520536561726368222C20224150455820496E69742C205472656520526567696F6E204944203D20222C207569772E6F7074696F6E732E74726565526567696F6E293B0A202020202020';
wwv_flow_api.g_varchar2_table(8) := '20200A20202020202020202F2F207365742076616C730A20202020202020207569772E5F70726976617465536F7261676528293B0A20202020202020207569772E5F6F626A2E246974656D203D2024287569772E656C656D656E74293B0A202020202020';
wwv_flow_api.g_varchar2_table(9) := '20207569772E5F6F626A2E2474726565526567696F6E203D2024282723272B7569772E6F7074696F6E732E74726565526567696F6E293B0A20202020202020207569772E5F6F626A2E24747265654C697374203D207569772E5F6F626A2E247472656552';
wwv_flow_api.g_varchar2_table(10) := '6567696F6E2E66696E6428222E7472656520756C2C2E612D547265655669657720756C22293B0A20202020202020207569772E5F76616C732E6974656D203D207569772E5F6F626A2E246974656D2E617474722827696427293B20202020202020200A20';
wwv_flow_api.g_varchar2_table(11) := '202020202020200A20202020202020202F2F20696E69740A20202020202020207569772E5F6F626A2E246974656D0A202020202020202020202E6F6E28276368616E6765272C2066756E6374696F6E28297B0A2020202020202020202020207569772E5F';
wwv_flow_api.g_varchar2_table(12) := '6368616E676528293B0A202020202020202020207D290A202020202020202020202E6F6E28276B6579646F776E272C2066756E6374696F6E28297B0A2020202020202020202020207569772E5F6B6579646F776E28293B0A202020202020202020207D29';
wwv_flow_api.g_varchar2_table(13) := '3B0A202020202020202020200A20202020202020202F2F2063616C6C20736561726368206F6E206C6F6164200A20202020202020206966287569772E6F7074696F6E732E66696C7465724F6E4C6F6164203D3D3D20275927297B0A202020202020202020';
wwv_flow_api.g_varchar2_table(14) := '206966287569772E5F6F626A2E246974656D2E76616C28292E6C656E677468203E2030297B0A2020202020202020202020207569772E5F6F626A2E24747265654C6973742E72656164792866756E6374696F6E2829207B2020202020202020202020200A';
wwv_flow_api.g_varchar2_table(15) := '20202020202020202020202020207569772E5F76616C732E6C61737456616C203D207569772E5F6F626A2E246974656D2E76616C28293B0A20202020202020202020202020207569772E5F6368616E676528293B20200A2020202020202020202020207D';
wwv_flow_api.g_varchar2_table(16) := '293B0A202020202020202020207D20202020202020202020200A20202020202020207D0A20202020202020200A0A2020202020207D2C0A2020202020202F2F206D61696E2066696C7465722066756E6374696F6E0A2020202020205F66696C7465723A20';
wwv_flow_api.g_varchar2_table(17) := '66756E6374696F6E28704C6973744F626A2C7046696C74657256616C297B0A202020202020202076617220756977203D20746869733B0A2020202020202020617065782E64656275672E6C6F672822415045582044796E616D6963205472656520536561';
wwv_flow_api.g_varchar2_table(18) := '726368222C202246696C746572204C6F6F7022293B0A20202020202020206966202821704C6973744F626A2E69732827756C27292026262021704C6973744F626A2E697328276F6C272929207B0A2020202020202020202072657475726E2066616C7365';
wwv_flow_api.g_varchar2_table(19) := '3B0A20202020202020207D202020200A202020202020202076617220764368696C64203D20704C6973744F626A2E6368696C6472656E28293B0A20202020202020207661722076526573203D2066616C73653B0A2020202020202020666F722028766172';
wwv_flow_api.g_varchar2_table(20) := '2069203D20303B2069203C20764368696C642E6C656E6774683B20692B2B29207B0A2020202020202020202076617220246C694F626A203D202428764368696C645B695D293B0A20202020202020202020696628246C694F626A2E697328276C69272929';
wwv_flow_api.g_varchar2_table(21) := '207B0A202020202020202020202020766172207644697370203D2066616C73653B0A20202020202020202020202069662028246C694F626A2E6368696C6472656E28292E6C656E677468203E203029207B0A2020202020202020202020202020666F7220';
wwv_flow_api.g_varchar2_table(22) := '28766172206A203D20303B206A203C20246C694F626A2E6368696C6472656E28292E6C656E6774683B206A2B2B29207B0A20202020202020202020202020202020766172207653756244697370203D207569772E5F66696C746572282428246C694F626A';
wwv_flow_api.g_varchar2_table(23) := '2E6368696C6472656E28295B6A5D292C207046696C74657256616C293B0A202020202020202020202020202020207644697370203D207644697370207C7C2076537562446973703B0A20202020202020202020202020207D0A2020202020202020202020';
wwv_flow_api.g_varchar2_table(24) := '207D0A2020202020202020202020206966202821764469737029207B0A20202020202020202020202020207661722076547874203D20246C694F626A2E7465787428293B0A20202020202020202020202020207644697370203D20765478742E746F4C6F';
wwv_flow_api.g_varchar2_table(25) := '7765724361736528292E696E6465784F66287046696C74657256616C29203E3D20303B0A2020202020202020202020207D0909090A202020202020202020202020246C694F626A2E6373732827646973706C6179272C207644697370203F202727203A20';
wwv_flow_api.g_varchar2_table(26) := '276E6F6E6527293B0A20202020202020202020202076526573203D2076526573207C7C2076446973703B0A202020202020202020207D200A20202020202020207D0A202020202020202072657475726E20765265733B20202020202020200A2020202020';
wwv_flow_api.g_varchar2_table(27) := '207D2C0A2020202020202F2F206B6579646F776E20616374696F6E0A2020202020205F6B6579646F776E3A2066756E6374696F6E28297B20202020202020200A202020202020202076617220756977203D20746869733B20202020202020200A20202020';
wwv_flow_api.g_varchar2_table(28) := '20202020617065782E64656275672E6C6F672822415045582044796E616D6963205472656520536561726368222C20224B6579646F776E22293B0A20202020202020207569772E5F76616C732E6F6E4C6F6164203D20274E273B0A202020202020202063';
wwv_flow_api.g_varchar2_table(29) := '6C65617254696D656F7574287569772E5F76616C732E6B657954696D656F7574293B0A20202020202020207569772E5F76616C732E6B657954696D656F7574203D2073657454696D656F75742866756E6374696F6E2829207B0A20202020202020202020';
wwv_flow_api.g_varchar2_table(30) := '76617220764375727256616C203D207569772E5F6F626A2E246974656D2E76616C28293B0A20202020202020202020696628764375727256616C203D3D3D207569772E5F76616C732E6C61737456616C292072657475726E3B0A20202020202020202020';
wwv_flow_api.g_varchar2_table(31) := '7569772E5F76616C732E6C61737456616C203D20764375727256616C3B0A202020202020202020207569772E5F6368616E676528293B202020202020202020200A20202020202020207D2C207569772E6F7074696F6E732E64656C6179293B2020200A20';
wwv_flow_api.g_varchar2_table(32) := '20202020207D2C202020200A2020202020202F2F206368616E676520616374696F6E0A2020202020205F6368616E67653A2066756E6374696F6E28297B0A202020202020202076617220756977203D20746869733B0A2020202020202020617065782E64';
wwv_flow_api.g_varchar2_table(33) := '656275672E6C6F672822415045582044796E616D6963205472656520536561726368222C20224368616E676522293B0A20202020202020207569772E5F6F626A2E24747265654C697374203D207569772E5F6F626A2E2474726565526567696F6E2E6669';
wwv_flow_api.g_varchar2_table(34) := '6E6428222E7472656520756C2C2E612D547265655669657720756C22293B0A20202020202020207569772E5F76616C732E66696C74657256616C203D207569772E5F76616C732E6C61737456616C2E746F4C6F7765724361736528293B0A202020202020';
wwv_flow_api.g_varchar2_table(35) := '20200A20202020202020202F2F20657870616E642074726565206265666F7265207365617263680A2020202020202020617065782E7769646765742E747265652E657870616E645F616C6C287569772E5F6F626A2E2474726565526567696F6E2E66696E';
wwv_flow_api.g_varchar2_table(36) := '6428222E747265652C2E612D547265655669657722292E61747472282269642229293B0A20202020202020200A20202020202020207569772E5F66696C746572287569772E5F6F626A2E24747265654C6973742C7569772E5F76616C732E66696C746572';
wwv_flow_api.g_varchar2_table(37) := '56616C293B0A20202020202020206966287569772E6F7074696F6E732E66696C7465724F6E4C6F6164203D3D3D20275927202626207569772E5F76616C732E6F6E4C6F616420213D20275927297B0A20202020202020202020617065782E736572766572';
wwv_flow_api.g_varchar2_table(38) := '2E706C7567696E2020287569772E6F7074696F6E732E616A617849642C207B706167654974656D733A202223222B7569772E5F76616C732E6974656D7D2C207B64617461547970653A2274657874227D293B20202020202020200A20202020202020207D';
wwv_flow_api.g_varchar2_table(39) := '0A2020202020207D0A202020207D293B0A7D293B0A';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(10923333478127111)
,p_plugin_id=>wwv_flow_api.id(29316328388941945)
,p_file_name=>'hr.bilog.mgoricki.searchtree.js'
,p_mime_type=>'application/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '242866756E6374696F6E28297B242E7769646765742822637573746F6D2E64796E616D696354726565536561726368222C7B6F7074696F6E733A7B74726565526567696F6E3A6E756C6C2C64656C61793A3230302C616A617849643A6E756C6C2C66696C';
wwv_flow_api.g_varchar2_table(2) := '7465724F6E4C6F61643A2259227D2C5F70726976617465536F726167653A66756E6374696F6E28297B76617220653D746869733B652E5F76616C733D7B6B657954696D656F75743A6E756C6C2C6C61737456616C3A22222C66696C74657256616C3A2222';
wwv_flow_api.g_varchar2_table(3) := '2C6974656D3A22222C6F6E4C6F61643A2259227D2C652E5F6F626A3D7B246974656D3A6E756C6C2C24747265654C6973743A6E756C6C2C2474726565526567696F6E3A6E756C6C7D7D2C5F696E69743A66756E6374696F6E28297B76617220653D746869';
wwv_flow_api.g_varchar2_table(4) := '733B617065782E64656275672E6C6F672822415045582044796E616D6963205472656520536561726368222C224150455820496E69742C205472656520526567696F6E204944203D20222C652E6F7074696F6E732E74726565526567696F6E292C652E5F';
wwv_flow_api.g_varchar2_table(5) := '70726976617465536F7261676528292C652E5F6F626A2E246974656D3D2428652E656C656D656E74292C652E5F6F626A2E2474726565526567696F6E3D24282223222B652E6F7074696F6E732E74726565526567696F6E292C652E5F6F626A2E24747265';
wwv_flow_api.g_varchar2_table(6) := '654C6973743D652E5F6F626A2E2474726565526567696F6E2E66696E6428222E7472656520756C2C2E612D547265655669657720756C22292C652E5F76616C732E6974656D3D652E5F6F626A2E246974656D2E617474722822696422292C652E5F6F626A';
wwv_flow_api.g_varchar2_table(7) := '2E246974656D2E6F6E28226368616E6765222C66756E6374696F6E28297B652E5F6368616E676528297D292E6F6E28226B6579646F776E222C66756E6374696F6E28297B652E5F6B6579646F776E28297D292C2259223D3D3D652E6F7074696F6E732E66';
wwv_flow_api.g_varchar2_table(8) := '696C7465724F6E4C6F61642626652E5F6F626A2E246974656D2E76616C28292E6C656E6774683E302626652E5F6F626A2E24747265654C6973742E72656164792866756E6374696F6E28297B652E5F76616C732E6C61737456616C3D652E5F6F626A2E24';
wwv_flow_api.g_varchar2_table(9) := '6974656D2E76616C28292C652E5F6368616E676528297D297D2C5F66696C7465723A66756E6374696F6E28652C74297B76617220693D746869733B696628617065782E64656275672E6C6F672822415045582044796E616D696320547265652053656172';
wwv_flow_api.g_varchar2_table(10) := '6368222C2246696C746572204C6F6F7022292C21652E69732822756C2229262621652E697328226F6C22292972657475726E21313B666F722876617220613D652E6368696C6472656E28292C6E3D21312C6F3D303B6F3C612E6C656E6774683B6F2B2B29';
wwv_flow_api.g_varchar2_table(11) := '7B766172206C3D2428615B6F5D293B6966286C2E697328226C692229297B76617220723D21313B6966286C2E6368696C6472656E28292E6C656E6774683E3029666F722876617220733D303B733C6C2E6368696C6472656E28292E6C656E6774683B732B';
wwv_flow_api.g_varchar2_table(12) := '2B297B766172205F3D692E5F66696C7465722824286C2E6368696C6472656E28295B735D292C74293B723D727C7C5F7D6966282172297B76617220643D6C2E7465787428293B723D642E746F4C6F7765724361736528292E696E6465784F662874293E3D';
wwv_flow_api.g_varchar2_table(13) := '307D6C2E6373732822646973706C6179222C723F22223A226E6F6E6522292C6E3D6E7C7C727D7D72657475726E206E7D2C5F6B6579646F776E3A66756E6374696F6E28297B76617220653D746869733B617065782E64656275672E6C6F67282241504558';
wwv_flow_api.g_varchar2_table(14) := '2044796E616D6963205472656520536561726368222C224B6579646F776E22292C652E5F76616C732E6F6E4C6F61643D224E222C636C65617254696D656F757428652E5F76616C732E6B657954696D656F7574292C652E5F76616C732E6B657954696D65';
wwv_flow_api.g_varchar2_table(15) := '6F75743D73657454696D656F75742866756E6374696F6E28297B76617220743D652E5F6F626A2E246974656D2E76616C28293B74213D3D652E5F76616C732E6C61737456616C262628652E5F76616C732E6C61737456616C3D742C652E5F6368616E6765';
wwv_flow_api.g_varchar2_table(16) := '2829297D2C652E6F7074696F6E732E64656C6179297D2C5F6368616E67653A66756E6374696F6E28297B76617220653D746869733B617065782E64656275672E6C6F672822415045582044796E616D6963205472656520536561726368222C224368616E';
wwv_flow_api.g_varchar2_table(17) := '676522292C652E5F6F626A2E24747265654C6973743D652E5F6F626A2E2474726565526567696F6E2E66696E6428222E7472656520756C2C2E612D547265655669657720756C22292C652E5F76616C732E66696C74657256616C3D652E5F76616C732E6C';
wwv_flow_api.g_varchar2_table(18) := '61737456616C2E746F4C6F7765724361736528292C617065782E7769646765742E747265652E657870616E645F616C6C28652E5F6F626A2E2474726565526567696F6E2E66696E6428222E747265652C2E612D547265655669657722292E617474722822';
wwv_flow_api.g_varchar2_table(19) := '69642229292C652E5F66696C74657228652E5F6F626A2E24747265654C6973742C652E5F76616C732E66696C74657256616C292C2259223D3D3D652E6F7074696F6E732E66696C7465724F6E4C6F61642626225922213D652E5F76616C732E6F6E4C6F61';
wwv_flow_api.g_varchar2_table(20) := '642626617065782E7365727665722E706C7567696E28652E6F7074696F6E732E616A617849642C7B706167654974656D733A2223222B652E5F76616C732E6974656D7D2C7B64617461547970653A2274657874227D297D7D297D293B';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(10923753301128238)
,p_plugin_id=>wwv_flow_api.id(29316328388941945)
,p_file_name=>'hr.bilog.mgoricki.searchtree.min.js'
,p_mime_type=>'application/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.import_end(p_auto_install_sup_obj => nvl(wwv_flow_application_install.get_auto_install_sup_obj, false), p_is_component_import => true);
commit;
end;
/
set verify on feedback on define on
prompt  ...done
